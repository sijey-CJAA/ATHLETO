{% extends "base.html" %}
{% block content %}
<!-- Fade-in Animation Overlay (Loader) -->
<div id="fadein-overlay"></div>

<!-- Enhanced Video Section with 3D Pop Effect -->
<div class="container-fluid px-0 mt-3 mb-5 video-container position-relative fadein-section">
  <div class="video-wrapper" style="transform: perspective(1000px) rotateX(5deg); box-shadow: 0 30px 50px rgba(0,0,0,0.3); border-radius: 0 0 20px 20px; overflow: hidden;">
    <video autoplay muted loop playsinline class="w-100" style="max-height: 500px; object-fit: cover; transform: scale(1.05);">
      <source src="{{ url_for('static', filename='videos/ATHLETO_AD.mp4') }}" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  <div class="video-overlay" style="position: absolute; bottom: 0; left: 0; right: 0; height: 100px; background: linear-gradient(to top, rgba(244, 244, 244, 0.7), transparent);"></div>
</div>

<!-- Hero Section with 3D Pop -->
<div class="container-fluid p-4 position-relative fadein-section"
     style="background: linear-gradient(135deg, maroon 0%, #800020 100%);
            margin-top: 24px;  /* add positive margin instead */
            z-index: 10; border-radius: 20px 20px 0 0;
            box-shadow: 0 -20px 40px rgba(0,0,0,0.2);
            transform: perspective(1000px) rotateX(-3deg);">
  <div class="container">
    <h1 class="text-left text-white display-4 fw-bold" style="text-shadow: 2px 2px 8px rgba(0,0,0,0.3);">ATHLETO</h1>
    <h5 class="text-white fs-3" style="text-shadow: 1px 1px 4px rgba(0,0,0,0.3);">Your Partner in Every Play</h5>
  </div>
  <div class="hero-accent" style="position: absolute; bottom: -20px; left: 50%; transform: translateX(-50%); width: 90%; height: 40px; background: white; border-radius: 50%; filter: blur(20px); opacity: 0.3;"></div>
</div>

<!-- Floating Category Cards -->
<div class="container mt-5 mb-5 position-relative fadein-section" style="z-index: 20; margin-top: -30px;">
  <div id="shop-cards" class="row g-4 justify-content-center">
    {% for category in [
      {'name': 'Women', 'image': 'women.png', 'url': 'women', 'color': '#f72585'},
      {'name': 'Men', 'image': 'men.png', 'url': 'men', 'color': '#4361ee'},
      {'name': 'Accessories & Equipments', 'image': 'equips.png', 'url': 'accessories_and_equipments', 'color': '#7209b7'},
      {'name': 'Shoes', 'image': 'shoes.png', 'url': 'shoes', 'color': '#3a0ca3'}
    ] %}
    <div class="col-12 col-sm-6 col-md-4 col-lg-3">
      <a href="{{ url_for(category.url) }}" class="card-link-override">
        <div class="card h-100 border-0 shadow-lg hover-float" style="border-radius: 15px; overflow: hidden; transition: all 0.3s ease; cursor: pointer;">
          <div class="card-img-top position-relative overflow-hidden" style="height: 200px;">
            <img src="{{ url_for('static', filename='pictures/' + category.image) }}" 
                 class="w-100 h-100 object-fit-cover"
                 alt="{{ category.name }}">
            <div class="img-overlay" style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(to top, '{{ category.color }}', transparent); opacity: 0.7;"></div>
          </div>
          <!---->
          <div class="card-body text-center position-relative" style="z-index: 2;">
            <h5 class="card-title fw-bold">{{ category.name }}</h5>
            <span class="btn btn-dark px-4 py-2 fake-btn" style="background: '{{ category.color }}'; border: none; pointer-events: none;">Shop Now</span>
          </div>
        </div>
      </a>
    </div>
    {% endfor %}
  </div>
</div>

<!-- Carousel Title -->
<div class="carousel-title fadein-section">NEXT GEN FLEX</div>

<!-- Carousel HTML -->
<div id="carouselExampleInterval" class="carousel slide fadein-section" data-bs-ride="carousel" data-bs-interval="3000">
  <div class="carousel-inner">
    <!-- Slide 1 -->
    <div class="carousel-item active">
      <div class="d-flex justify-content-center align-items-center">
        <button class="custom-carousel-control me-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="custom-chevron" aria-hidden="true">&lt;</span>
          <span class="visually-hidden">Previous</span>
        </button>
        <div class="card" style="width: 30rem;">
          <div class="card-body text-center">
            <a href="{{ url_for('destination1') }}">
              <img src="{{ url_for('static', filename='pictures/latest/pink pulse1.png') }}" class="img-fluid mb-3 glow-img mx-auto d-block" alt="Image 1">
            </a>
          </div>
        </div>
        <button class="custom-carousel-control ms-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="custom-chevron" aria-hidden="true">&gt;</span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <!-- Slide 2 -->
    <div class="carousel-item">
      <div class="d-flex justify-content-center align-items-center">
        <button class="custom-carousel-control me-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="custom-chevron" aria-hidden="true">&lt;</span>
          <span class="visually-hidden">Previous</span>
        </button>
        <div class="card" style="width: 30rem;">
          <div class="card-body text-center">
            <a href="{{ url_for('destination2') }}">
              <img src="{{ url_for('static', filename='pictures/latest/blush rush.png') }}" class="img-fluid mb-3 glow-img mx-auto d-block" alt="Image 2">
            </a>
          </div>
        </div>
        <button class="custom-carousel-control ms-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="custom-chevron" aria-hidden="true">&gt;</span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <!-- Slide 3 -->
    <div class="carousel-item">
      <div class="d-flex justify-content-center align-items-center">
        <button class="custom-carousel-control me-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="custom-chevron" aria-hidden="true">&lt;</span>
          <span class="visually-hidden">Previous</span>
        </button>
        <div class="card" style="width: 30rem;">
          <div class="card-body text-center">
            <a href="{{ url_for('destination3') }}">
              <img src="{{ url_for('static', filename='pictures/latest/WebFlex Velocity.png') }}" class="img-fluid mb-3 glow-img mx-auto d-block" alt="Image 3">
            </a>
          </div>
        </div>
        <button class="custom-carousel-control ms-3" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="custom-chevron" aria-hidden="true">&gt;</span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
  </div>
</div>

<!-- Google Fonts in your <head>: -->
<!-- 
<link href="https://fonts.googleapis.com/css?family=Bebas+Neue:700&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css?family=Josefin+Sans:400,700&display=swap" rel="stylesheet">
-->

<style>
.bebas {
  font-family: 'Bebas Neue', 'Perandory', Arial, sans-serif;
  font-weight: 900;
  letter-spacing: 0.04em;
}
.josefin {
  font-family: 'Josefin Sans', Arial, sans-serif;
}
.hero-gif-section {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: flex-start;
  min-height: 440px;
}
.hero-gif-text {
  width: 100%;
  text-align: center;
  margin-bottom: 1.2rem;
  z-index: 2;
}
.hero-gif-title {
  font-size: clamp(2.5rem, 8vw, 4.2rem);
  font-weight: 900;
  color: #fff;
  text-shadow: 3px 3px 18px #000, 0 2px 6px #c1121f88;
  margin-bottom: 0.6rem;
  letter-spacing: .04em;
}
.hero-gif-desc {
  font-size: 1.25rem;
  color: #f2f2f2;
  text-shadow: 0 1px 10px #111a;
  margin-bottom: 1.1rem;
}

@media (max-width: 600px) {
  .hero-gif-title { font-size: 2.1rem; }
  .hero-gif-text { padding-top: 8px; }
  .hero-gif-desc { font-size: 1rem;}
}
/* Make entire card clickable, no link style */
.card-link-override {
  display: block;
  text-decoration: none !important;
  color: inherit !important;
  height: 100%;
}
.card-link-override:focus, .card-link-override:hover {
  text-decoration: none !important;
  color: inherit !important;
}
.fake-btn {
  pointer-events: none;
  /* To make it non-clickable but visually button */
}
</style>

<!-- GIF Hero Section: Text and Button ABOVE the GIF, no overlap -->
<div class="container my-5 fadein-section hero-gif-section">
  <div class="hero-gif-text">
    <h2 class="mb-3 bebas hero-gif-title">Train Like a Pro</h2>
    <p class="mb-3 josefin hero-gif-desc">Push your limits and elevate your game with gear designed for champions.</p>
    <!--<a href="{{ url_for('shop1') }}" class="nike-btn">Shop Now</a>-->
  </div>
  <img src="{{ url_for('static', filename='videos/soccerhd.gif') }}" alt="Soccer Animation"
       class="img-fluid rounded shadow mb-4 w-100" style="height:auto; object-fit:cover;">
</div>

<style>
.nike-btn {
  display: inline-block;
  background: #111;
  color: #fff !important;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 0.08em;
  border: 1px solid #fff;
  border-radius: 999px;
  padding: 0.75em 2.2em;
  font-size: 1.15rem;
  font-family: 'Arial Narrow', Arial, sans-serif;
  box-shadow: 0 2px 8px rgba(0,0,0,0.11);
  transition: background 0.15s, color 0.15s, box-shadow 0.15s;
  text-decoration: none;
}
.nike-btn:hover, .nike-btn:focus {
  background: #222;
  color: #f5f5f5 !important;
  box-shadow: 0 4px 16px rgba(0,0,0,0.18);
  text-decoration: none;
}
</style>

<style>
/* Fade-in overlay loader */
#fadein-overlay {
  position: fixed;
  z-index: 9999;
  top: 0; left: 0; width: 100vw; height: 100vh;
  background: #fff; /* or use your brand color */
  opacity: 1;
  pointer-events: all;
  transition: opacity 1s cubic-bezier(.53,1.3,.39,1.01);
  will-change: opacity;
  display: flex;
  align-items: center;
  justify-content: center;
}
#fadein-overlay::before {
  content: '';
  display: block;
  width: 80px;
  height: 80px;
  border: 8px solid #800020;
  border-top-color: #fff;
  border-radius: 50%;
  animation: spin 1.2s linear infinite;
  opacity: 0.7;
}
@keyframes spin {
  to { transform: rotate(360deg);}
}
body.loaded #fadein-overlay {
  opacity: 0;
  pointer-events: none;
}
/* Fade-in for sections */
.fadein-section {
  opacity: 0;
  transform: translateY(30px) scale(0.975);
  animation: fadein-appear 1s cubic-bezier(.42,1.2,.51,1.01) forwards;
}
.fadein-section:nth-of-type(1) { animation-delay: 0.1s; }
.fadein-section:nth-of-type(2) { animation-delay: 0.25s; }
.fadein-section:nth-of-type(3) { animation-delay: 0.45s; }
.fadein-section:nth-of-type(4) { animation-delay: 0.65s; }
.fadein-section:nth-of-type(5) { animation-delay: 0.9s; }
@keyframes fadein-appear {
  to {
    opacity: 1;
    transform: none;
  }
}
</style>

<!-- Add this in your <head> or CSS file as needed -->
<style>
/* ... your other styles (carousel, card, hover, etc) ... */
.carousel-title {
  text-align: center;
  font-family: 'Arial Narrow', Arial, sans-serif;
  font-weight: 300;
  letter-spacing: 0.17em;
  font-size: 2.6rem;
  margin-bottom: 1.5rem;
  margin-top: 1.5rem;
  font-stretch: expanded;
  text-transform: uppercase;
}
.glow-img {
  border: 3px solid #fff;
  box-shadow: 0 0 24px 7px rgba(255,255,255,0.97);
  border-radius: 12px;
  transition: box-shadow 0.3s, border 0.3s;
}
.glow-img:hover {
  box-shadow: 0 0 36px 14px rgba(255,255,255,1);
  border-color: #fff;
}
.custom-carousel-control {
  background: transparent;
  border: none;
  outline: none;
  cursor: pointer;
  padding: 0 10px;
  transition: filter 0.3s;
  display: flex;
  align-items: center;
}
.custom-carousel-control:focus {
  outline: none;
}
.custom-carousel-control:hover .custom-chevron {
  text-shadow: 0 0 18px #fff, 0 0 32px #fff;
}
.custom-chevron {
  font-size: 2.4rem;
  font-weight: 700;
  color: #fff;
  text-shadow: 0 0 10px #fff, 0 0 18px #fff;
  user-select: none;
  pointer-events: none;
  line-height: 1;
  display: inline-block;
  padding: 8px 12px;
  border-radius: 6px;
  background: rgba(30,30,30,0.10);
}
.video-wrapper {
  transition: transform 0.5s ease;
}
.video-wrapper:hover {
  transform: perspective(1000px) rotateX(8deg) scale(1.02);
}
.hover-float {
  transition: all 0.3s ease;
}
.hover-float:hover {
  transform: translateY(-10px);
  box-shadow: 0 15px 30px rgba(0,0,0,0.2) !important;
}
@media (max-width: 768px) {
  .video-wrapper {
    transform: none;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
  }
  .container-fluid.p-5 {
    transform: none !important;
    margin-top: 0 !important;
  }
}
</style>

<script>
  // Fade-in loader, then animate sections
  document.addEventListener('DOMContentLoaded', function() {
    setTimeout(function() {
      document.body.classList.add('loaded');
      // Delay to ensure overlay fades before sections animate
      setTimeout(function() {
        var sections = document.querySelectorAll('.fadein-section');
        sections.forEach(function(section, i) {
          section.style.animationDelay = (0.15 + i * 0.18) + "s";
        });
      }, 100);
    }, 400); // optional: tweak for your preferred initial delay

    // Enhanced Video Controls
    const video = document.querySelector('video');
    const restartVideo = () => {
      video.currentTime = 0;
      video.play().catch(e => console.log('Autoplay prevented:', e));
    };
    video.addEventListener('ended', restartVideo, false);
    if (/Mobi|Android/i.test(navigator.userAgent)) {
      video.setAttribute('playsinline', '');
      video.setAttribute('webkit-playsinline', '');
      video.setAttribute('x-webkit-airplay', 'allow');
      video.muted = true;
    }
    window.addEventListener('scroll', function() {
      const scrollPosition = window.pageYOffset;
      const videoWrapper = document.querySelector('.video-wrapper');
      videoWrapper.style.transform = `perspective(1000px) rotateX(${5 - scrollPosition * 0.05}deg)`;
    });
  });
</script>
{% endblock %}